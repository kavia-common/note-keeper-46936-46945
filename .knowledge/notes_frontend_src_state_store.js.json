{"is_source_file": true, "format": "JavaScript", "description": "This file implements a framework-agnostic client-side notes store for a LightningJS app, managing application state including CRUD operations for notes, persistence through local storage or API, and providing subscription for reactivity.", "external_files": ["localStorage (browser API)", "fetch (browser API for HTTP requests)"], "external_methods": ["fetch()"], "published": ["store", "useNotesStore"], "classes": [{"name": "NotesStore", "description": "A class that encapsulates state management for notes, providing methods for loading, adding, updating, deleting, and selecting notes, along with reactive subscription capabilities."}], "methods": [{"name": "subscribe(fn)", "description": "Subscribe to state updates; returns an unsubscribe function.", "scope": "NotesStore", "scopeKind": "class"}, {"name": "getState()", "description": "Returns a shallow clone of the current state.", "scope": "NotesStore", "scopeKind": "class"}, {"name": "_setState(patch)", "description": "Updates the internal state with a patch and emits change notifications.", "scope": "NotesStore", "scopeKind": "class"}, {"name": "loadNotes()", "description": "Loads notes either from an API or local storage.", "scope": "NotesStore", "scopeKind": "class"}, {"name": "addNote({ title = '', content = '' } = {})", "description": "Creates a new note, using API or local storage.", "scope": "NotesStore", "scopeKind": "class"}, {"name": "updateNote(id, updates = {})", "description": "Updates an existing note by id, via API or local storage.", "scope": "NotesStore", "scopeKind": "class"}, {"name": "deleteNote(id)", "description": "Removes a note by id, via API or local storage.", "scope": "NotesStore", "scopeKind": "class"}, {"name": "selectNote(id)", "description": "Sets the currently selected note by id.", "scope": "NotesStore", "scopeKind": "class"}, {"name": "selectedNote()", "description": "Returns the currently selected note object or null.", "scope": "NotesStore", "scopeKind": "class"}, {"name": "sortedNotes()", "description": "Returns notes sorted by updatedAt and title.", "scope": "NotesStore", "scopeKind": "class"}, {"name": "isLoading()", "description": "Returns the loading state.", "scope": "NotesStore", "scopeKind": "class"}, {"name": "getError()", "description": "Returns the current error message, if any.", "scope": "NotesStore", "scopeKind": "class"}, {"name": "_emit()", "scope": "NotesStore", "scopeKind": "class", "description": "unavailable"}, {"name": "_runAsync(actionName, fn)", "scope": "NotesStore", "scopeKind": "class", "description": "unavailable"}, {"name": "apiFetch(path, options = {})", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "constructor(initial)", "scope": "NotesStore", "scopeKind": "class", "description": "unavailable"}, {"name": "readFromLocalStorage()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "uid()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "useNotesStore()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "writeToLocalStorage(state)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["apiFetch('/notes')", "apiFetch('/notes/' + encodeURIComponent(id))", "apiFetch('/notes', { method: 'POST', body: JSON.stringify(base) })", "apiFetch('/notes/' + encodeURIComponent(id), { method: 'PUT', body: JSON.stringify(payload) })", "apiFetch('/notes/' + encodeURIComponent(id), { method: 'DELETE' })"], "search-terms": ["LightningJS notes store", "Client-side state management", "API fallback local storage", "CRUD notes", "Reactive store"], "state": 2, "file_id": 41, "knowledge_revision": 102, "git_revision": "51c1e6fe6387fcd451adce6a8c436fa66059fc78", "revision_history": [{"83": ""}, {"102": "51c1e6fe6387fcd451adce6a8c436fa66059fc78"}], "ctags": [{"_type": "tag", "name": "API_BASE", "path": "/home/kavia/workspace/code-generation/note-keeper-46936-46945/notes_frontend/src/state/store.js", "pattern": "/^const API_BASE =$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "LS_KEY", "path": "/home/kavia/workspace/code-generation/note-keeper-46936-46945/notes_frontend/src/state/store.js", "pattern": "/^const LS_KEY = 'notes_store_v1';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "NotesStore", "path": "/home/kavia/workspace/code-generation/note-keeper-46936-46945/notes_frontend/src/state/store.js", "pattern": "/^class NotesStore {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "USE_API", "path": "/home/kavia/workspace/code-generation/note-keeper-46936-46945/notes_frontend/src/state/store.js", "pattern": "/^const USE_API = !!API_BASE;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "_emit", "path": "/home/kavia/workspace/code-generation/note-keeper-46936-46945/notes_frontend/src/state/store.js", "pattern": "/^  _emit() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "NotesStore", "scopeKind": "class"}, {"_type": "tag", "name": "_runAsync", "path": "/home/kavia/workspace/code-generation/note-keeper-46936-46945/notes_frontend/src/state/store.js", "pattern": "/^  async _runAsync(actionName, fn) {$/", "language": "JavaScript", "kind": "method", "signature": "(actionName, fn)", "scope": "NotesStore", "scopeKind": "class"}, {"_type": "tag", "name": "_setState", "path": "/home/kavia/workspace/code-generation/note-keeper-46936-46945/notes_frontend/src/state/store.js", "pattern": "/^  _setState(patch) {$/", "language": "JavaScript", "kind": "method", "signature": "(patch)", "scope": "NotesStore", "scopeKind": "class"}, {"_type": "tag", "name": "addNote", "path": "/home/kavia/workspace/code-generation/note-keeper-46936-46945/notes_frontend/src/state/store.js", "pattern": "/^  async addNote({ title = '', content = '' } = {}) {$/", "language": "JavaScript", "kind": "method", "signature": "({ title = '', content = '' } = {})", "scope": "NotesStore", "scopeKind": "class"}, {"_type": "tag", "name": "apiFetch", "path": "/home/kavia/workspace/code-generation/note-keeper-46936-46945/notes_frontend/src/state/store.js", "pattern": "/^async function apiFetch(path, options = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "(path, options = {})"}, {"_type": "tag", "name": "constructor", "path": "/home/kavia/workspace/code-generation/note-keeper-46936-46945/notes_frontend/src/state/store.js", "pattern": "/^  constructor(initial) {$/", "language": "JavaScript", "kind": "method", "signature": "(initial)", "scope": "NotesStore", "scopeKind": "class"}, {"_type": "tag", "name": "defaultState", "path": "/home/kavia/workspace/code-generation/note-keeper-46936-46945/notes_frontend/src/state/store.js", "pattern": "/^const defaultState = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "deleteNote", "path": "/home/kavia/workspace/code-generation/note-keeper-46936-46945/notes_frontend/src/state/store.js", "pattern": "/^  async deleteNote(id) {$/", "language": "JavaScript", "kind": "method", "signature": "(id)", "scope": "NotesStore", "scopeKind": "class"}, {"_type": "tag", "name": "error", "path": "/home/kavia/workspace/code-generation/note-keeper-46936-46945/notes_frontend/src/state/store.js", "pattern": "/^  error: null,$/", "language": "JavaScript", "kind": "property", "scope": "defaultState", "scopeKind": "class"}, {"_type": "tag", "name": "getError", "path": "/home/kavia/workspace/code-generation/note-keeper-46936-46945/notes_frontend/src/state/store.js", "pattern": "/^  getError() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "NotesStore", "scopeKind": "class"}, {"_type": "tag", "name": "getState", "path": "/home/kavia/workspace/code-generation/note-keeper-46936-46945/notes_frontend/src/state/store.js", "pattern": "/^  getState() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "NotesStore", "scopeKind": "class"}, {"_type": "tag", "name": "initialState", "path": "/home/kavia/workspace/code-generation/note-keeper-46936-46945/notes_frontend/src/state/store.js", "pattern": "/^let initialState = { ...defaultState };$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "isLoading", "path": "/home/kavia/workspace/code-generation/note-keeper-46936-46945/notes_frontend/src/state/store.js", "pattern": "/^  isLoading() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "NotesStore", "scopeKind": "class"}, {"_type": "tag", "name": "loadNotes", "path": "/home/kavia/workspace/code-generation/note-keeper-46936-46945/notes_frontend/src/state/store.js", "pattern": "/^  async loadNotes() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "NotesStore", "scopeKind": "class"}, {"_type": "tag", "name": "loading", "path": "/home/kavia/workspace/code-generation/note-keeper-46936-46945/notes_frontend/src/state/store.js", "pattern": "/^  loading: false,$/", "language": "JavaScript", "kind": "property", "scope": "defaultState", "scopeKind": "class"}, {"_type": "tag", "name": "notes", "path": "/home/kavia/workspace/code-generation/note-keeper-46936-46945/notes_frontend/src/state/store.js", "pattern": "/^  notes: [],$/", "language": "JavaScript", "kind": "property", "scope": "defaultState", "scopeKind": "class"}, {"_type": "tag", "name": "readFromLocalStorage", "path": "/home/kavia/workspace/code-generation/note-keeper-46936-46945/notes_frontend/src/state/store.js", "pattern": "/^function readFromLocalStorage() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "selectNote", "path": "/home/kavia/workspace/code-generation/note-keeper-46936-46945/notes_frontend/src/state/store.js", "pattern": "/^  selectNote(id) {$/", "language": "JavaScript", "kind": "method", "signature": "(id)", "scope": "NotesStore", "scopeKind": "class"}, {"_type": "tag", "name": "selectedNote", "path": "/home/kavia/workspace/code-generation/note-keeper-46936-46945/notes_frontend/src/state/store.js", "pattern": "/^  selectedNote() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "NotesStore", "scopeKind": "class"}, {"_type": "tag", "name": "selectedNoteId", "path": "/home/kavia/workspace/code-generation/note-keeper-46936-46945/notes_frontend/src/state/store.js", "pattern": "/^  selectedNoteId: null,$/", "language": "JavaScript", "kind": "property", "scope": "defaultState", "scopeKind": "class"}, {"_type": "tag", "name": "sortedNotes", "path": "/home/kavia/workspace/code-generation/note-keeper-46936-46945/notes_frontend/src/state/store.js", "pattern": "/^  sortedNotes() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "NotesStore", "scopeKind": "class"}, {"_type": "tag", "name": "store", "path": "/home/kavia/workspace/code-generation/note-keeper-46936-46945/notes_frontend/src/state/store.js", "pattern": "/^export const store = new NotesStore(initialState);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "subscribe", "path": "/home/kavia/workspace/code-generation/note-keeper-46936-46945/notes_frontend/src/state/store.js", "pattern": "/^  subscribe(fn) {$/", "language": "JavaScript", "kind": "method", "signature": "(fn)", "scope": "NotesStore", "scopeKind": "class"}, {"_type": "tag", "name": "uid", "path": "/home/kavia/workspace/code-generation/note-keeper-46936-46945/notes_frontend/src/state/store.js", "pattern": "/^function uid() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "updateNote", "path": "/home/kavia/workspace/code-generation/note-keeper-46936-46945/notes_frontend/src/state/store.js", "pattern": "/^  async updateNote(id, updates = {}) {$/", "language": "JavaScript", "kind": "method", "signature": "(id, updates = {})", "scope": "NotesStore", "scopeKind": "class"}, {"_type": "tag", "name": "useNotesStore", "path": "/home/kavia/workspace/code-generation/note-keeper-46936-46945/notes_frontend/src/state/store.js", "pattern": "/^export function useNotesStore() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "writeToLocalStorage", "path": "/home/kavia/workspace/code-generation/note-keeper-46936-46945/notes_frontend/src/state/store.js", "pattern": "/^function writeToLocalStorage(state) {$/", "language": "JavaScript", "kind": "function", "signature": "(state)"}], "hash": "4196a24b8add1489ea3059115ed49844", "format-version": 4, "code-base-name": "notes_frontend", "filename": "notes_frontend/src/state/store.js", "fields": [{"name": "error: null,", "scope": "defaultState", "scopeKind": "class", "description": "unavailable"}, {"name": "let initialState = { ...defaultState };", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "loading: false,", "scope": "defaultState", "scopeKind": "class", "description": "unavailable"}, {"name": "notes: [],", "scope": "defaultState", "scopeKind": "class", "description": "unavailable"}, {"name": "selectedNoteId: null,", "scope": "defaultState", "scopeKind": "class", "description": "unavailable"}]}